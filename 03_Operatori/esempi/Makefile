# Makefile per Esempi - Lezione 03: Operatori
# Compilazione e esecuzione automatica degli esempi

# ğŸ¯ Configurazione
CC = gcc
CFLAGS = -Wall -Wextra -std=c99
TARGETS = calcolatrice_base confronti_avanzati manipolazione_bit

# ğŸ¨ Colori per output
RED = \033[31m
GREEN = \033[32m
YELLOW = \033[33m
BLUE = \033[34m
MAGENTA = \033[35m
CYAN = \033[36m
WHITE = \033[37m
RESET = \033[0m

.PHONY: all clean run demo help info

# ğŸš€ Target principale
all: $(TARGETS)
	@echo "$(GREEN)âœ… Tutti gli esempi compilati con successo!$(RESET)"
	@echo "$(CYAN)ğŸ’¡ Usa 'make run' per eseguire tutti gli esempi$(RESET)"

# ğŸ“ Compilazione singoli esempi
calcolatrice_base: calcolatrice_base.c
	@echo "$(YELLOW)ğŸ”¨ Compilazione Calcolatrice Base...$(RESET)"
	$(CC) $(CFLAGS) -o $@ $<
	@echo "$(GREEN)âœ… Calcolatrice Base compilata$(RESET)"

confronti_avanzati: confronti_avanzati.c
	@echo "$(YELLOW)ğŸ”¨ Compilazione Confronti Avanzati...$(RESET)"
	$(CC) $(CFLAGS) -o $@ $<
	@echo "$(GREEN)âœ… Confronti Avanzati compilato$(RESET)"

manipolazione_bit: manipolazione_bit.c
	@echo "$(YELLOW)ğŸ”¨ Compilazione Manipolazione Bit...$(RESET)"
	$(CC) $(CFLAGS) -o $@ $<
	@echo "$(GREEN)âœ… Manipolazione Bit compilata$(RESET)"

# ğŸƒ Esecuzione con input automatici
run: all
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                    ESECUZIONE ESEMPI                       â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ”¸ Esempio 1: Calcolatrice Base$(RESET)"
	@echo "$(WHITE)â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”$(RESET)"
	@echo "$(YELLOW)ğŸ’¡ Input automatico: 15.5, 4.2, opzione 7 (tutte le operazioni)$(RESET)"
	echo -e "15.5\n4.2\n7" | ./calcolatrice_base
	@echo ""
	@echo "$(CYAN)ğŸ”¸ Esempio 2: Confronti Avanzati$(RESET)"
	@echo "$(WHITE)â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”$(RESET)"
	@echo "$(YELLOW)ğŸ’¡ Input automatico: voti 8,7,9 - assenze 15 - debiti recuperati$(RESET)"
	echo -e "8\n7\n9\n15\ns" | ./confronti_avanzati
	@echo ""
	@echo "$(CYAN)ğŸ”¸ Esempio 3: Manipolazione Bit$(RESET)"
	@echo "$(WHITE)â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”$(RESET)"
	./manipolazione_bit

# ğŸ­ Dimostrazione interattiva
demo: all
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                    DEMO INTERATTIVA                        â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(BLUE)ğŸ¯ Seleziona l'esempio da eseguire:$(RESET)"
	@echo "$(WHITE)1) Calcolatrice Base$(RESET)"
	@echo "$(WHITE)2) Confronti Avanzati$(RESET)"
	@echo "$(WHITE)3) Manipolazione Bit$(RESET)"
	@echo ""
	@read -p "$(CYAN)Inserisci la tua scelta (1-3): $(RESET)" choice; \
	case $$choice in \
		1) echo "$(GREEN)ğŸš€ Avvio Calcolatrice Base...$(RESET)"; ./calcolatrice_base ;; \
		2) echo "$(GREEN)ğŸš€ Avvio Confronti Avanzati...$(RESET)"; ./confronti_avanzati ;; \
		3) echo "$(GREEN)ğŸš€ Avvio Manipolazione Bit...$(RESET)"; ./manipolazione_bit ;; \
		*) echo "$(RED)âŒ Scelta non valida!$(RESET)" ;; \
	esac

# ğŸ§¹ Pulizia
clean:
	@echo "$(RED)ğŸ§¹ Pulizia file compilati...$(RESET)"
	rm -f $(TARGETS)
	@echo "$(GREEN)âœ… Pulizia completata!$(RESET)"

# ğŸ“Š Informazioni sui file
info:
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                    INFORMAZIONI ESEMPI                     â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ“‚ File Sorgente:$(RESET)"
	@ls -la *.c 2>/dev/null | awk '{print "$(YELLOW)  ğŸ”¸ " $$9 " $(WHITE)(" $$5 " bytes)$(RESET)"}' || echo "$(RED)âŒ Nessun file .c trovato$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ¯ Eseguibili:$(RESET)"
	@ls -la $(TARGETS) 2>/dev/null | awk '{print "$(GREEN)  âœ… " $$9 " $(WHITE)(" $$5 " bytes)$(RESET)"}' || echo "$(RED)âŒ Nessun eseguibile trovato$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ“ Statistiche Codice:$(RESET)"
	@for file in *.c; do \
		if [ -f "$$file" ]; then \
			lines=$$(wc -l < "$$file"); \
			echo "$(WHITE)  ğŸ“„ $$file: $$lines righe$(RESET)"; \
		fi; \
	done
	@echo ""
	@echo "$(CYAN)ğŸ¯ Concetti Dimostrati:$(RESET)"
	@echo "$(WHITE)  ğŸ“„ calcolatrice_base.c: Operatori aritmetici, incremento/decremento$(RESET)"
	@echo "$(WHITE)  ğŸ“„ confronti_avanzati.c: Operatori relazionali, logici, short-circuit$(RESET)"
	@echo "$(WHITE)  ğŸ“„ manipolazione_bit.c: Operatori bit a bit, flags, ottimizzazioni$(RESET)"

# ğŸ“‹ Aiuto
help:
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                        AIUTO MAKEFILE                      â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ¯ Target disponibili:$(RESET)"
	@echo "$(WHITE)  make all                    $(YELLOW)- Compila tutti gli esempi$(RESET)"
	@echo "$(WHITE)  make calcolatrice_base      $(YELLOW)- Compila solo la calcolatrice$(RESET)"
	@echo "$(WHITE)  make confronti_avanzati     $(YELLOW)- Compila solo i confronti$(RESET)"
	@echo "$(WHITE)  make manipolazione_bit      $(YELLOW)- Compila solo i bit$(RESET)"
	@echo "$(WHITE)  make run                    $(YELLOW)- Esegue tutti gli esempi$(RESET)"
	@echo "$(WHITE)  make demo                   $(YELLOW)- Demo interattiva$(RESET)"
	@echo "$(WHITE)  make clean                  $(YELLOW)- Rimuove file compilati$(RESET)"
	@echo "$(WHITE)  make info                   $(YELLOW)- Mostra informazioni$(RESET)"
	@echo "$(WHITE)  make help                   $(YELLOW)- Mostra questo aiuto$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ”§ Esempi di utilizzo:$(RESET)"
	@echo "$(WHITE)  make && make run            $(YELLOW)# Compila ed esegue tutto$(RESET)"
	@echo "$(WHITE)  make calcolatrice_base      $(YELLOW)# Solo calcolatrice$(RESET)"
	@echo "$(WHITE)  ./calcolatrice_base         $(YELLOW)# Esegue calcolatrice$(RESET)"
	@echo "$(WHITE)  make demo                   $(YELLOW)# Scegli esempio da eseguire$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ“š Ordine di studio consigliato:$(RESET)"
	@echo "$(WHITE)  1ï¸âƒ£  calcolatrice_base       $(YELLOW)# Operatori aritmetici base$(RESET)"
	@echo "$(WHITE)  2ï¸âƒ£  confronti_avanzati      $(YELLOW)# Logica e confronti$(RESET)"
	@echo "$(WHITE)  3ï¸âƒ£  manipolazione_bit       $(YELLOW)# Operatori bit a bit$(RESET)"
