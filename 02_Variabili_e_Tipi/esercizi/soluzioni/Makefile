# Makefile per le Soluzioni degli Esercizi - Lezione 02
# Compilazione automatica e test delle soluzioni

# ğŸ¯ Configurazione
CC = gcc
CFLAGS = -Wall -Wextra -std=c99
LDFLAGS = -lm

# ğŸ“ Definizione dei target
TARGETS = esercizio1_soluzione esercizio2_soluzione esercizio3_soluzione

# ğŸ¨ Colori per output
RED = \033[31m
GREEN = \033[32m
YELLOW = \033[33m
BLUE = \033[34m
MAGENTA = \033[35m
CYAN = \033[36m
WHITE = \033[37m
RESET = \033[0m

.PHONY: all clean run test help info

# ğŸš€ Target principale
all: $(TARGETS)
	@echo "$(GREEN)âœ… Tutte le soluzioni compilate con successo!$(RESET)"
	@echo "$(CYAN)ğŸ’¡ Usa 'make run' per eseguire tutte le soluzioni$(RESET)"

# ğŸ“ Compilazione delle singole soluzioni
esercizio1_soluzione: esercizio1_soluzione.c
	@echo "$(YELLOW)ğŸ”¨ Compilazione Esercizio 1...$(RESET)"
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "$(GREEN)âœ… Esercizio 1 compilato$(RESET)"

esercizio2_soluzione: esercizio2_soluzione.c
	@echo "$(YELLOW)ğŸ”¨ Compilazione Esercizio 2...$(RESET)"
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "$(GREEN)âœ… Esercizio 2 compilato$(RESET)"

esercizio3_soluzione: esercizio3_soluzione.c
	@echo "$(YELLOW)ğŸ”¨ Compilazione Esercizio 3...$(RESET)"
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "$(GREEN)âœ… Esercizio 3 compilato$(RESET)"

# ğŸƒ Esecuzione
run: all
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                    ESECUZIONE SOLUZIONI                    â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ”¸ Esecuzione Esercizio 1: Tipi di Dato$(RESET)"
	@echo "$(WHITE)â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”$(RESET)"
	./esercizio1_soluzione
	@echo ""
	@echo "$(CYAN)ğŸ”¸ Esecuzione Esercizio 2: Calcolatore Area$(RESET)"
	@echo "$(WHITE)â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”$(RESET)"
	@echo "$(YELLOW)ğŸ’¡ Input di esempio: lunghezza=5.5, larghezza=3.2$(RESET)"
	echo -e "5.5\n3.2" | ./esercizio2_soluzione
	@echo ""
	@echo "$(CYAN)ğŸ”¸ Esecuzione Esercizio 3: Convertitore Temperature$(RESET)"
	@echo "$(WHITE)â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”$(RESET)"
	@echo "$(YELLOW)ğŸ’¡ Input di esempio: 1 (Celsius), 25.5Â°C$(RESET)"
	echo -e "1\n25.5" | ./esercizio3_soluzione

# ğŸ” Test con valori predefiniti
test: all
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                       TEST AUTOMATICI                      â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(BLUE)ğŸ§ª Test Esercizio 1: Dimostrazione tipi di dato$(RESET)"
	@./esercizio1_soluzione
	@echo ""
	@echo "$(BLUE)ğŸ§ª Test Esercizio 2: Calcolo area rettangolo 10x5$(RESET)"
	@echo -e "10\n5" | ./esercizio2_soluzione
	@echo ""
	@echo "$(BLUE)ğŸ§ª Test Esercizio 3: Conversione 0Â°C$(RESET)"
	@echo -e "1\n0" | ./esercizio3_soluzione
	@echo ""
	@echo "$(BLUE)ğŸ§ª Test Esercizio 3: Conversione 100Â°F$(RESET)"
	@echo -e "2\n100" | ./esercizio3_soluzione
	@echo ""
	@echo "$(GREEN)âœ… Tutti i test completati!$(RESET)"

# ğŸ§¹ Pulizia
clean:
	@echo "$(RED)ğŸ§¹ Pulizia file compilati...$(RESET)"
	rm -f $(TARGETS)
	@echo "$(GREEN)âœ… Pulizia completata!$(RESET)"

# ğŸ“Š Informazioni sui file sorgente
info:
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                   INFORMAZIONI SOLUZIONI                   â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ“‚ File Sorgente:$(RESET)"
	@ls -la *.c 2>/dev/null | awk '{print "$(YELLOW)  ğŸ”¸ " $$9 " $(WHITE)(" $$5 " bytes)$(RESET)"}' || echo "$(RED)âŒ Nessun file .c trovato$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ¯ Eseguibili:$(RESET)"
	@ls -la $(TARGETS) 2>/dev/null | awk '{print "$(GREEN)  âœ… " $$9 " $(WHITE)(" $$5 " bytes)$(RESET)"}' || echo "$(RED)âŒ Nessun eseguibile trovato$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ“ Statistiche Codice:$(RESET)"
	@for file in *.c; do \
		if [ -f "$$file" ]; then \
			lines=$$(wc -l < "$$file"); \
			echo "$(WHITE)  ğŸ“„ $$file: $$lines righe$(RESET)"; \
		fi; \
	done

# ğŸ“‹ Aiuto
help:
	@echo "$(MAGENTA)â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—$(RESET)"
	@echo "$(MAGENTA)â•‘                        AIUTO MAKEFILE                      â•‘$(RESET)"
	@echo "$(MAGENTA)â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ¯ Target disponibili:$(RESET)"
	@echo "$(WHITE)  make all          $(YELLOW)- Compila tutte le soluzioni$(RESET)"
	@echo "$(WHITE)  make esercizio1   $(YELLOW)- Compila solo esercizio 1$(RESET)"
	@echo "$(WHITE)  make esercizio2   $(YELLOW)- Compila solo esercizio 2$(RESET)"
	@echo "$(WHITE)  make esercizio3   $(YELLOW)- Compila solo esercizio 3$(RESET)"
	@echo "$(WHITE)  make run          $(YELLOW)- Esegue tutte le soluzioni$(RESET)"
	@echo "$(WHITE)  make test         $(YELLOW)- Esegue test automatici$(RESET)"
	@echo "$(WHITE)  make clean        $(YELLOW)- Rimuove file compilati$(RESET)"
	@echo "$(WHITE)  make info         $(YELLOW)- Mostra informazioni sui file$(RESET)"
	@echo "$(WHITE)  make help         $(YELLOW)- Mostra questo aiuto$(RESET)"
	@echo ""
	@echo "$(CYAN)ğŸ”§ Esempi di utilizzo:$(RESET)"
	@echo "$(WHITE)  make && make run              $(YELLOW)# Compila ed esegue tutto$(RESET)"
	@echo "$(WHITE)  make esercizio1_soluzione     $(YELLOW)# Compila solo esercizio 1$(RESET)"
	@echo "$(WHITE)  ./esercizio1_soluzione        $(YELLOW)# Esegue esercizio 1$(RESET)"
